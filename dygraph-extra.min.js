Dygraph.Export={},Dygraph.Export.DEFAULT_ATTRS={backgroundColor:"transparent",titleFont:"bold 18px serif",titleFontColor:"black",axisLabelFont:"bold 14px serif",axisLabelFontColor:"black",labelFont:"normal 12px serif",labelFontColor:"black",legendFont:"bold 12px serif",legendFontColor:"black",vLabelLeft:20,legendHeight:20,legendMargin:20,lineHeight:30,maxlabelsWidth:0,labelTopMargin:35,magicNumbertop:8},Dygraph.Export.isSupported=function(){"use strict";try{var t=document.createElement("canvas"),e=t.getContext("2d");return!!t.toDataURL&&!!e.fillText}catch(t){}return!1},Dygraph.Export.asPNG=function(t,e,l){"use strict";l=Dygraph.Export.asCanvas(t,l);e.src=l.toDataURL()},Dygraph.Export.asCanvas=function(t,e){"use strict";var l={},a=Dygraph.createCanvas();return Dygraph.update(l,Dygraph.Export.DEFAULT_ATTRS),Dygraph.update(l,e),a.width=t.width_,a.height=t.height_+l.legendHeight,Dygraph.Export.drawPlot(a,t,l),Dygraph.Export.drawLegend(a,t,l),a},Dygraph.Export.drawPlot=function(t,e,l){"use strict";var a=t.getContext("2d");a.fillStyle=l.backgroundColor,a.fillRect(0,0,t.width,t.height);var t=e.hidden_,r=0;a.drawImage(t,0,0);t=Dygraph.Export.getPlugin(e,"Axes Plugin");if(t){for(var n=t.plugin,r=0;r<n.ylabels_.length;r++)Dygraph.Export.putLabel(a,n.ylabels_[r],l,l.labelFont,l.labelFontColor);for(r=0;r<n.xlabels_.length;r++)Dygraph.Export.putLabel(a,n.xlabels_[r],l,l.labelFont,l.labelFontColor)}t=Dygraph.Export.getPlugin(e,"ChartLabels Plugin");for(t&&(t=t.plugin,Dygraph.Export.putLabel(a,t.title_div_,l,l.titleFont,l.titleFontColor),Dygraph.Export.putLabel(a,t.xlabel_div_,l,l.axisLabelFont,l.axisLabelFontColor),Dygraph.Export.putVerticalLabelY1(a,t.ylabel_div_,l,l.axisLabelFont,l.axisLabelFontColor,"center"),Dygraph.Export.putVerticalLabelY2(a,t.y2label_div_,l,l.axisLabelFont,l.axisLabelFontColor,"center")),r=0;r<e.layout_.annotations.length;r++)Dygraph.Export.putLabelAnn(a,e.layout_.annotations[r],l,l.labelFont,l.labelColor)},Dygraph.Export.putLabel=function(t,e,l,a,r){"use strict";if(e&&e.style){var n,i,o=parseInt(e.style.top,10),s=parseInt(e.style.left,10);e.style.top.length||(n=parseInt(e.style.bottom,10),i=parseInt(e.style.height,10),o=t.canvas.height-l.legendHeight-n-i),o+=l.magicNumbertop;var p=parseInt(e.style.width,10);switch(e.style.textAlign){case"center":s+=Math.ceil(p/2);break;case"right":s+=p}Dygraph.Export.putText(t,s,o,e,a,r)}},Dygraph.Export.putVerticalLabelY1=function(t,e,l,a,r,n){"use strict";var i,o;e&&(i=parseInt(e.style.top,10),o=parseInt(e.style.left,10)+parseInt(e.style.width,10)/2,e=e.innerText||e.textContent,o=o||l.vLabelLeft,"center"==n&&(l=t.measureText(e),i=Math.ceil((t.canvas.height-l.width)/2+l.width)),t.save(),t.translate(0,t.canvas.height),t.rotate(-Math.PI/2),t.fillStyle=r,t.font=a,t.textAlign=n,t.fillText(e,i,o),t.restore())},Dygraph.Export.putVerticalLabelY2=function(t,e,l,a,r,n){"use strict";var i,o,s;e&&(i=parseInt(e.style.top,10),o=parseInt(e.style.right,10)+2*parseInt(e.style.width,10),s=e.innerText||e.textContent,"center"==n&&(i=Math.ceil(t.canvas.height/2)),t.save(),t.translate(parseInt(e.style.width,10),0),t.rotate(Math.PI/2),t.fillStyle=r,t.font=a,t.textAlign=n,t.fillText(s,i,o-t.canvas.width),t.restore())},Dygraph.Export.putText=function(t,e,l,a,r,n){"use strict";var i=a.style.textAlign||"left",a=a.innerText||a.textContent;t.fillStyle=n,t.font=r,t.textAlign=i,t.textBaseline="middle",t.fillText(a,e,l)},Dygraph.Export.drawLegend=function(t,e,l){"use strict";for(var a=t.getContext("2d"),r=e.getColors(),n=e.attr_("labels").slice(1),i=0,o=0;o<n.length;o++)i=i+a.measureText("- "+n[o]).width+5;var s=Math.floor((t.width-i)/2),p=t.height-l.legendHeight+10,g=e.attr_("visibility");a.font=l.legendFont,a.textAlign="left",a.textBaseline="middle";var h,x=0;for(o=0;o<n.length;o++)g[o]&&(h="- "+n[o],a.fillStyle=r[x],x++,a.fillText(h,s,p),s=s+a.measureText(h).width+5)},Dygraph.Export.getPlugin=function(t,e){for(i=0;i<t.plugins_.length;i++)if(t.plugins_[i].plugin.toString()==e)return t.plugins_[i];return null};
